# Setting Up the AI API Key

## ‚ö†Ô∏è FOR GRADERS: Your university will provide the API key - you don't need to create one!

## Quick Setup (2 Simple Steps)

**You will receive the API key from your university/instructor.**

### Step 1: Edit .env file
Open `.env` in any text editor and replace `your_api_key_here` with your actual API key:
```
API_KEY=your-actual-api-key-here
FLASK_HOST=127.0.0.1
FLASK_PORT=5000
FLASK_DEBUG=False
```

### Step 2: Run the app
```bash
setup_and_run.bat
```

That's it! The app will automatically load your API key from the `.env` file.

---

## Alternative: Environment Variable (Advanced)

If you prefer not to use a .env file, you can still set the environment variable:

**Windows Command Prompt:**
```cmd
set API_KEY=your-api-key-here
setup_and_run.bat
```

**Windows PowerShell:**
```powershell
$env:API_KEY="your-api-key-here"
python app.py
```

---

## How to Check if API Key is Working

### Method 1: Check Status Endpoint
Visit: http://localhost:5000/status

You should see:
```json
{
  "ai_enabled": true,
  ...
}
```

### Method 2: Console Output
When you run `setup_and_run.bat`, you'll see:
- ‚úÖ "AI features ENABLED - API key found" (with key)
- ‚ö†Ô∏è "AI features DISABLED - No API key set" (without key)

### Method 3: In the App
After classification (Step 4), you'll see:
- **With API:** A blue box showing "ü§ñ AI Analysis"
- **Without API:** Only the surface classification results (still works!)

---

## What Works Without API Key?

**Everything works!** The app uses geometric algorithms as fallback:
- ‚úÖ STL upload and analysis
- ‚úÖ 3D visualization
- ‚úÖ Region detection
- ‚úÖ Surface classification (geometric)
- ‚úÖ STEP file generation
- ‚úÖ All downloads

**With API key, you get:**
- ü§ñ AI-powered surface analysis
- üí° Object type suggestions (e.g., "This appears to be a mechanical bracket...")
- üìù Enhanced surface descriptions
- üéØ Better insights into the geometry

---

## Troubleshooting

### "API key not found" but I set it
- **Restart your terminal/command prompt** after setting environment variable
- Make sure there are no quotes around the key in system environment variables
- Check spelling: `API_KEY`

### "AI features disabled" in setup
- The key is not set in the current session
- Try Option 1 above (set in same terminal before running)

### API calls failing
- Ensure the API key provided by your university is copied correctly
- Check your internet connection
- The app will still work with geometric fallback

### Rate limits
- Free tier: Limited requests per minute
- The app makes 1 API call per classification
- If you hit limits, wait a minute and try again

---

## For Graders

If you have a university-provided API key:
1. Use **Option 1** for quick testing: `set API_KEY=your_key`
2. Run `setup_and_run.bat`
3. You'll see AI analysis in the classification step

The app is designed to work perfectly **without** the API key - it just won't show the AI analysis box.
